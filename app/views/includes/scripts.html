<!-- Javascript -->
<script src="/public/javascripts/details.polyfill.js"></script>
<script src="/public/javascripts/jquery-1.11.3.js"></script>
<script src="/public/javascripts/govuk/selection-buttons.js"></script>
<script src="/public/javascripts/govuk/shim-links-with-button-role.js"></script>
<script src="/public/javascripts/govuk/show-hide-content.js"></script>
<script src="/public/javascripts/application.js"></script>
<script src="https://assets.publishing.service.gov.uk/service-manual-frontend/application-6e1076c8610026f4245c8eb8f5976a50b4ed2f2ef82f9fbb5f1811913e1561d4.js"></script>
{% if useAutoStoreData %}
  <script src="/public/javascripts/auto-store-data.js"></script>
{% endif %}

<script src="{{asset_path}}/javascripts/vehicle-makes.js"></script>
<script src="{{asset_path}}/javascripts/vehicle-colours.js"></script>
<script src="{{asset_path}}/javascripts/accessible-autocomplete.js"></script>

<script>
	var numPermits = $('.vehicleMake').length;
	for (var i = 0; i < numPermits; i++) {
		accessibleAutocomplete({
			element: document.querySelector('#vehicleColour-'+i),
			id: 'vehicleColour-' + i, // To match it to the existing <label>.
			source: vehicleColours
		})
		accessibleAutocomplete({
			element: document.querySelector('#vehicleMake-'+i),
			id: 'vehicleMake-' + i, // To match it to the existing <label>.
			source: vehicleMakes
		})
	}
</script>

<script src="{{asset_path}}/data/{{council.string}}BoundaryData.js"></script>
<script src="https://unpkg.com/leaflet@1.1.0/dist/leaflet.js"
   integrity="sha512-mNqn2Wg7tSToJhvHcqfzLMU6J4mkOImSPTxVZAdo+lcPlk+GhZmYgACEe0x35K7YzW1zJ7XyJV/TT1MrdXvMcA=="
   crossorigin=""></script>
<script>

	// {{latitude}} and {{longitude}} set in routes.js

	var mymap = L.map('map').setView([{{latitude}}, {{longitude}}], 16);
	L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
	    attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
	    maxZoom: 20,
	    id: 'mapbox.streets',
	    accessToken: 'pk.eyJ1Ijoic2FuamF5cG95emVyIiwiYSI6ImNqNHNiaDVvNDMxcGcyd3NlNWE5MXZqZDIifQ.jLkU7XzY3H4lTFIfrryVGg'
	}).addTo(mymap);
	var marker = L.marker([{{latitude}}, {{longitude}}]).addTo(mymap);

	var boundaries = {{council.string}}BoundaryData;

	for (var i = 0; i < boundaries.length; i++) {
		var polygon = L.polygon(L.GeoJSON.coordsToLatLngs(boundaries[i])).addTo(mymap);
	}
</script>
